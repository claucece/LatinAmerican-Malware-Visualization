//constructor function to draw the binary visualization
function Binary() {
  this.name = "binary";
  this.isMalware = false;

  var asciiToDraw;

  // the main word to be used.
  var word = "MALWARE";
  var ascii = [],
    font = {
      M: [7, 5, 5, 5],
      A: [5, 5, 5, 7],
      L: [7, 5, 5, 7],
      W: [7, 4, 7, 7],
      A: [7, 7, 4, 4],
      R: [4, 4, 4, 7],
      E: [1, 1, 1, 1]
    };

  this.draw = function() {
    if (this.isMalware) {
      // this is modified from: https://stackoverflow.com/questions/39983648/how-can-i-write-ascii-art-for-textusing-any-language
      word.split('').forEach(function(c) { // calculate the 'size' of each character on the font, convert it to binary and take the length.
        var size = (font[c].reduce(function(r, a) { // reduce, as seen: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/Reduce
          return r | a;
        }, 0)).toString(2).length;

        font[c].forEach(function(a, i) {
          var temp = a.toString(2).split('').map(function(c) {
            return +c ? '+' : ' '; // map to '+' or empty.
          });
          while (temp.length < size) {
            temp.unshift(' '); // add ' ' to the beginning of the array
          }
          ascii[i] = ascii[i] || [];
          ascii[i].push(temp.join(''));
        });
      });


      asciiToDraw = ascii.map(function(a) { // creates a new string
        return a.join(' ');
      }).join('\n')


      // take the treble energy from the malware sound.
      fourier.analyze();
      energy = fourier.getEnergy("treble");

      // fill it with dark red
      fill(128, 38, 38);
      if (energy > 70) {
        for (i = 0; i < 50; i++) { // draw depending on the given position.
          text(asciiToDraw[i], i * 100, i * 10);
          text(asciiToDraw[i], i * 10, i * 100);
        }
      }
    }
  };

}
