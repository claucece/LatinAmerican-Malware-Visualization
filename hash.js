//constructor function to draw the spots visualization
function Hash() {
  this.name = "hash";
  this.isMalware = false; // this variable is externally modified.

  direction = 1; // Direction of motion (1 is down, -1 is up)
  y = height / 10; // the initial height.
  maximum = 100; // the maximum measure for height.

  // the draw function: it displays and moves the hash.
  this.draw = function() {
    push();
    var spectrum = fourier.analyze();

    if (this.isMalware) {
      for (var i = 0; i < 60; i++) {
        var h = height + map(spectrum[i], 0, 255, height, 0); // calculate based on the spectrum.

        this.move(h); // Move each object.
        this.display(i); // Display each object.
      }
    }

    pop();
  };

  // the move function: moves and changes the direction.
  // @params: 'h', the height base based on the spectrum.
  this.move = function(h) {
    if (h == 2872) {
      return;
    }

    y += (direction * (h / 5)); // calculate the y coordinate based on the direction times the spectrum.
    if ((y > (h - maximum)) || (y < maximum)) { // calcuate the direction.
      direction *= -1;
    }
  };

  // displays the hash: every element is displayed once vertically on the right side of the screen.
  // @params: 'i', an input to calcuate the height.
  this.display = function(i) {
    var x = width / 1.1 + (i);

    // the generated base hash.
    var baseHash = ["248", "41", "253", "160", "67", "14", "194", "123", "140", "47", "132", "13", "139", "96", "198", "198", "242", "104", "90", "12", "131", "58", "252", "41", "98", "89", "23", "224", "25", "137", "119", "60", "205", "206", "30", "200", "223", "57", "21", "197", "43", "190", "19", "39", "112", "214", "249", "188", "90", "64", "94", "5", "92", "239", "23", "196", "80", "124", "167", "62", "143", "248", "252", "219"];

    // fill with dark red.
    fill(128, 38, 38);

    for (j = 0; j < baseHash.length; j++) {
      text(baseHash[i], x * (j + 1), y + (i * 100)); // position in the screen according to the outside and inside loop.
    }
  };
}
