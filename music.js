//constructor function for the music
function Music() {
    
    // mapped to the hash of the malware    
    var midiNote = 0;
    var oscIndex = 0;
    var triOscIndex = 0;
    // TODO: add the mid and high sounds
    var hash = [248, 41, 253, 160, 67, 14, 194, 123, 140, 47, 132, 13, 139, 96, 198, 198, 242, 104, 90, 12, 131];
    notes = [];

    var midiVal, freq;

    this.osc = new p5.TriOsc();
    this.sine = new p5.Oscillator('sine')
    //this.envlo = new p5.Envelope();
    
    this.create = function() {
        for (var i = 0; i < hash.length; i++) {
            midiNote = random(60, 74);
            notes[i] = midiNote;
        }
    }
    console.log(notes);
    this.create();
    
	// draw the noise to the screen
	this.startSound = function() {
      // see also: userStartAudio();
      this.osc.start();

      midiVal = notes[oscIndex % notes.length];
      freq = midiToFreq(midiVal);
      this.osc.freq(freq);
      //this.envlo.ramp(osc, 0, 1.0, 0);

      oscIndex++;
	};
    
    this.playOscillator = function() {
      this.sine.start();
      playing = true;
      midiVal = midiNotes[oscIndex % midiNotes.length];
      freq = midiToFreq(midiVal);
      amp = constrain(map(mouseY, height, 0, 0, 1), 0, 1);

      this.sine.freq(freq);
      this.sine.amp(amp, 0.1);

      triOscIndex++;
    };
}