// constructor function to draw a noise (random) shape.
function Noise() {
  // name of the visualisation.
  this.name = "noise";
  this.isMalware = false; // externally modified.

  var noiseStep, prog;

  noiseStep = 0.10;
  prog = 0;

  // draw the noise to the screen.
  this.draw = function() {
    push();
      
    if (this.isMalware) { // if it is the 'malware-state' draw random noise.
      translate(width / 1.3, height / 1.5);

      beginShape();
      noFill();
      stroke(255, 252, 25);
      strokeWeight(2);

      for (var i = 0; i < 100; i++) {
        // generate the x and y coordinates from noise.
        var x = map(noise(i * noiseStep + prog), 0, 1, -(width / 2), height / 2);
        var y = map(noise(i * noiseStep + prog + 1000), 0, 1, -(width / 2), height / 2);

        vertex(x, y);
      }
      endShape();

      fourier.analyze();
      energy = fourier.getEnergy("bass");

      if (energy > 100) {
        prog += 0.5;
      }
    } else { // if it is the 'non-malware-state' draw a line.
      // draw a single line.
      stroke(255, 252, 25);
      strokeWeight(2);
      noFill();
      line(width / 2.5, height / 2, width, height / 2);
    }

    pop();
  };
}